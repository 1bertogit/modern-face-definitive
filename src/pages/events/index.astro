---
import BaseLayout from '@layouts/BaseLayout.astro';
import Button from '@components/ui/Button.astro';
import { getAllEvents, getUpcomingEvents, getPastEvents } from '@lib/content/events';
import type { Locale } from '@lib/i18n';

const locale: Locale = 'en';
const allEvents = getAllEvents(locale);
const upcomingEvents = getUpcomingEvents(locale);
const pastEvents = getPastEvents(locale);

const keywords = ['online congress', 'facial surgery event', 'medical congress', 'Dr Robério Brandão'];
---

<BaseLayout
  title="Events | Online Congresses"
  description="Join our online congresses and events on facial surgery techniques, featuring live demonstrations, expert panels, and interactive sessions."
  keywords={keywords}
  lang="en"
>
  <!-- Hero -->
  <section class="py-32 bg-primary-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
      <p class="text-[10px] font-medium text-accent-600 uppercase tracking-[0.2em] mb-4">
        Online Events
      </p>
      <h1 class="text-4xl md:text-5xl font-serif text-white leading-tight mb-6">
        Congresses & Events
      </h1>
      <p class="text-xl text-primary-300 leading-relaxed max-w-2xl mx-auto">
        Join our online congresses featuring the latest advances in facial surgery, live
        demonstrations, and expert discussions.
      </p>
    </div>
  </section>

  <!-- Upcoming Events -->
  {upcomingEvents.length > 0 && (
    <section class="py-20 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-[10px] font-medium text-accent-600 uppercase tracking-[0.2em] mb-4">
            Upcoming
          </h2>
          <h3 class="text-4xl font-serif text-primary-900">Upcoming Events</h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {
            upcomingEvents.map((event) => {
              const eventDate = new Date(event.startDate);
              const formattedDate = eventDate.toLocaleDateString('en-US', {
                month: 'long',
                day: 'numeric',
                year: 'numeric',
              });

              return (
                <a
                  href={`/events/${event.slug}`}
                  class="group block bg-ivory p-8 rounded-lg border border-gray-100 hover:border-accent-600 transition-all"
                >
                  <div class="mb-4">
                    <p class="text-xs text-accent-600 uppercase tracking-wider mb-2">
                      {formattedDate}
                    </p>
                    <h4 class="text-2xl font-serif font-normal text-primary-900 mb-3 group-hover:text-accent-600 transition-colors">
                      {event.title}
                    </h4>
                    <p class="text-sm text-warmGray leading-relaxed line-clamp-3">
                      {event.shortDescription || event.description}
                    </p>
                  </div>
                  <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                    {event.price !== undefined && (
                      <div>
                        <p class="text-2xl font-serif text-primary-900">${event.price}</p>
                        {event.originalPrice && (
                          <p class="text-xs text-softGray line-through">${event.originalPrice}</p>
                        )}
                      </div>
                    )}
                    <span class="text-accent-600 text-sm font-medium flex items-center gap-1">
                      Learn More
                      <span class="material-symbols-outlined text-base group-hover:translate-x-1 transition-transform">
                        arrow_forward
                      </span>
                    </span>
                  </div>
                </a>
              );
            })
          }
        </div>
      </div>
    </section>
  )}

  <!-- Past Events -->
  {pastEvents.length > 0 && (
    <section class="py-20 bg-ivory">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
          <h2 class="text-[10px] font-medium text-accent-600 uppercase tracking-[0.2em] mb-4">
            Past Events
          </h2>
          <h3 class="text-4xl font-serif text-primary-900">Past Events & Recordings</h3>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {
            pastEvents.map((event) => {
              const eventDate = new Date(event.startDate);
              const formattedDate = eventDate.toLocaleDateString('en-US', {
                month: 'long',
                day: 'numeric',
                year: 'numeric',
              });

              return (
                <a
                  href={`/events/${event.slug}`}
                  class="group block bg-white p-8 rounded-lg border border-gray-100 hover:border-accent-600 transition-all opacity-75 hover:opacity-100"
                >
                  <div class="mb-4">
                    <p class="text-xs text-softGray uppercase tracking-wider mb-2">
                      {formattedDate}
                    </p>
                    <h4 class="text-2xl font-serif font-normal text-primary-900 mb-3 group-hover:text-accent-600 transition-colors">
                      {event.title}
                    </h4>
                    <p class="text-sm text-warmGray leading-relaxed line-clamp-3">
                      {event.shortDescription || event.description}
                    </p>
                  </div>
                  <div class="flex items-center justify-between pt-4 border-t border-gray-200">
                    {event.recordings && event.recordings.length > 0 && (
                      <div class="flex items-center gap-2 text-sm text-accent-600">
                        <span class="material-symbols-outlined text-base">video_library</span>
                        <span>{event.recordings.length} Recordings</span>
                      </div>
                    )}
                    <span class="text-accent-600 text-sm font-medium flex items-center gap-1">
                      View Recordings
                      <span class="material-symbols-outlined text-base group-hover:translate-x-1 transition-transform">
                        arrow_forward
                      </span>
                    </span>
                  </div>
                </a>
              );
            })
          }
        </div>
      </div>
    </section>
  )}

  <!-- Empty State -->
  {allEvents.length === 0 && (
    <section class="py-32 bg-ivory">
      <div class="max-w-4xl mx-auto px-4 text-center">
        <span class="material-symbols-outlined text-6xl text-primary-300 mb-6">event</span>
        <h2 class="text-3xl font-serif text-primary-900 mb-4">No Events Scheduled</h2>
        <p class="text-warmGray mb-8">
          Check back soon for upcoming congresses and events.
        </p>
        <Button href="/education" variant="primary" size="lg">
          View Training Programs
        </Button>
      </div>
    </section>
  )}

  <!-- CTA -->
  <section class="py-20 bg-primary-900">
    <div class="max-w-3xl mx-auto px-4 sm:px-6 text-center">
      <h2 class="text-3xl font-serif text-white mb-4">Stay Updated</h2>
      <p class="text-primary-300 mb-8">
        Get notified about upcoming events and congresses.
      </p>
      <Button href="/contact" variant="primary" size="lg">
        Contact Us
      </Button>
    </div>
  </section>
</BaseLayout>

