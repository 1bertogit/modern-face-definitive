---
/**
 * Breadcrumb - Navegação visual + Schema markup
 */
import SchemaBreadcrumb from '@components/seo/SchemaBreadcrumb.astro';

interface BreadcrumbItem {
  name: string;
  url: string;
}

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className = '' } = Astro.props;
---

<!-- Schema Markup -->
<SchemaBreadcrumb items={items} />

<!-- Visual Breadcrumb -->
<nav aria-label="Breadcrumb" class={`text-sm ${className}`}>
  <ol
    class="flex items-center flex-wrap gap-1"
    itemscope
    itemtype="https://schema.org/BreadcrumbList"
  >
    {
      items.map((item, index) => {
        // Determinar se está em fundo escuro baseado na classe aplicada
        const isDarkBg = className.includes('text-primary-300') || className.includes('text-white');

        return (
          <li
            class="flex items-center"
            itemprop="itemListElement"
            itemscope
            itemtype="https://schema.org/ListItem"
          >
            {index > 0 && (
              <span class={isDarkBg ? 'mx-2 text-primary-400' : 'mx-2 text-softGray'}>/</span>
            )}
            {index === items.length - 1 ? (
              <span
                class={isDarkBg ? 'text-white font-medium' : 'text-primary-900 font-medium'}
                itemprop="name"
              >
                {item.name}
              </span>
            ) : (
              <a
                href={item.url}
                class={
                  isDarkBg
                    ? 'text-primary-300 hover:text-white transition-colors'
                    : 'text-softGray hover:text-primary-600 transition-colors'
                }
                itemprop="item"
              >
                <span itemprop="name">{item.name}</span>
              </a>
            )}
            <meta itemprop="position" content={String(index + 1)} />
          </li>
        );
      })
    }
  </ol>
</nav>
